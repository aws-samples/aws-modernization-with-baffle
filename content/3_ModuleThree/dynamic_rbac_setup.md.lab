---
title: "Setup RBAC rules" # MODIFY THIS TITLE IF APPLICABLE
chapter: true
weight: 2 
---
# Lab 2 - No-code Application Encryption and Dynamic Masking


## Setup RBAC rules

This LAB provisions some Database users (harry,sally,ron) and respective grants along with the infrastructure. We will be creating new users henry, sophia and randy and provide them grants. 


| DB users | Provisioned/LAB | 
|--|--|--|
| harry | Provisioned |
| sally | Provisioned | 
| ron |Provisioned |
| henry | Lab |
| sophia |Lab |
| randy | Lab |



**Set up users in Database**

1.  Login into the AWS Console and navigate to the CloudFormation service. Click Stacks->(baffle-stack-name) and a window slides in from the right.
    
2.  Click the Outputs tab, Find and right click the link next to the PGAdminURL and select open in new tab. A new browser tab for pgAdmin will appear.
    
3.  In the new tab, log into pgAdmin using the credentials you created (same as Baffle Manager credentials). The pgAdmin dashboard should appear.
    
4.  On the left navigation pane called Object Explorer, will be a database server called “dynamic-mask”, click on the chevron by it to show the different connections.

5. Click the chevron next to direct@baffle and a window will pop-up. Enter the RDS database password you created earlier and click OK.
    
6.  Click the chevron next to Databases. Right click dynamic-mask and then Query Tool. A new SQL command window will open on the right.

7.  Create these three users with these SQL commands:

		
		create user henry password 'henry';

		create user sophia password 'sophia';

		create user randy with password 'randy';
	
8.  Grant those users access to the table “customers” using these SQL commands:

  
	
			grant usage on schema public to henry;

			grant select on table customers to henry;

			grant usage on schema public to sophia;

			grant select on table customers to sophia;

			grant usage on schema public to randy;

			grant select on table customers to randy;	
    
**Setup Baffle RBAC**

Please navigate to Baffle Manger URL and login.

1.  In the left navigation pane, under Database Proxies, click Data Sources

![datasource1](../images/datasource-1.png)

2.  In the left navigation pane, under Database Proxies, click **User Groups**
3.  In the top right, click **Create +**. A panel will slide in from the right.
5.  In _User Group Name_, enter “human_resources”
6.  In _Users_, type in “henry”
7.  In the bottom right, click **Create**. The User Groups list page will appear.
8.  In the top right, click **Create +**. A panel will slide in from the right.
9.  In _User Group Name_, enter “support”
10.  In _Users_, type in “sophia”
11.  In the bottom right, click **Create**. The User Groups list page will appear.
12.  In the top right, click **Create +**. A panel will slide in from the right.
13.  In _User Group Name_, enter “remote”
14.  In _Users_, type in “randy”
15.  In the bottom right, click **Create**. The User Groups list page will appear with all three groups listed:


